# Демонстрация session fixation

## Порядок эксплуатации уязвимости

1. Запустить сервер HTTP: `php -S 127.0.0.1:8080`.
2. Посредством браузера № 1 открыть веб­‑страницу <http://127.0.0.1:8080/index.php> и пройти аутентификацию под именем злоумышленника ⁠— _Bob_.
3. Посредством браузера № 1 перейти по гиперссылке, опубликованной на странице с результатами аутентификации (`/auth.php`), на защищённую страницу (`/target.php`).
4. Находясь на защищённой странице, скопировать конечную часть _URL_, начиная с вопросительного знака (например, `?PHPSESSID=...`). Это параметр с идентификатором сеанса.
5. Сформировать _URL_, ведущий на страницу аутентификации и оканчивающийся фрагментом, полученным на шаге 4. Должен получиться _URL_ вида <http://127.0.0.1:8080/index.php?PHPSESSID=...>.
6. Выступить от имени добропорядочного пользователя, который по невнимательности перешёл по _URL_, сформированному на шаге 5, и пройти аутентификацию под именем _Alice_ посредством браузера № 2.
7. Убедиться, что идентификаторы сеансов в браузерах №⁠№ 1 и 2 совпадают.
8. Повторно запросить защищённую страницу в браузере № 1. Окажется, что данные сеанса были обновлены в результате аутентификации _Alice_, и теперь они доступны как через браузер № 2, так и через браузер № 1.

## Защита

Для защиты добавьте `session_regenerate_id();` после `session_start();` в файле `auth.php`.
